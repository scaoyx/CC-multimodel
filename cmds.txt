CMD='eval "$(conda shell.bash hook)" && conda activate cc && python NONOL_meanpool_bos_comparison_COLLECTING_FINAL_VERSIONS/CC/extract_activations_offline.py \
    --uniref_file uniref50.fasta.gz \
    --max_seq_len 1024 \
    --num_proteins 1000000 \
    --batch_size 32 \
    --compute_norm_scalars 1 \
    --norm_scalars_path offline_norm_scalars/multimodel_first_middle_last.pt \
    --output_dir offline_activations/multimodel_first_middle_last \
    --proteins_per_file 500 \
    --seed 42 \
    --cuda_device 0' && (echo "Command executed on $(date):" && echo "Command: $CMD" && echo "PID: $$" && echo "-----------------" && nohup bash -c "$CMD") > logs/nohup_offline_extraction_$(date +%Y%m%d_%H%M%S)_pid$$.out 2>&1 &


python /home/syxcao/polished_CC/NONOL_meanpool_bos_comparison_COLLECTING_FINAL_VERSIONS/CC/extract_activations_offline.py \
    --uniref_file /home/syxcao/polished_CC/uniref50.fasta.gz \
    --max_seq_len 1024 \
    --num_proteins 1000000 \
    --batch_size 64 \
    --compute_norm_scalars 1 \
    --norm_scalars_path /home/syxcao/polished_CC/offline_norm_scalars/multimodel_first_middle_last.pt \
    --output_dir /home/syxcao/polished_CC/offline_activations \
    --proteins_per_file 500 \
    --seed 42 \
    --cuda_devices 0 1 2

